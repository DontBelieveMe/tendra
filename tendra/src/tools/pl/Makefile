# Automatically generated by make_mf version 1.1

# Standard directories and files
BASE=/u/g/release/Source
SRC=${BASE}/src/tools/pl
SRC2=${SRC}/templ
SPEC=${BASE}/src/lib/tdf/def_4_0.db

# Standard variables

CC=tcc
TCCOPTS=-Yansi -Xs
CCOPTS=${TCCOPTS} -I${SRC}
MAIN_CC=${CC} ${CCOPTS} -c
LINK_CC=${CC} ${TCCOPTS}
LIBS=

REMOVE=rm -f
MOVE=mv
COPY=cp
ECHO=echo
SHELL=/bin/sh

# Dependencies and construction rules

NAME=pl
EXTRA=auto
EXTRA_CLEAN=
EXTRA_CLOBBER=

OFILES=analyse_sort.o consfile.o decodings.o errors.o find_id.o fnsfile.o\
 includes.o lex.o main.o readstreams.o standardsh.o streams.o syntax.o\
 units.o util.o

${NAME} : ${OFILES}
	${LINK_CC} -o ${NAME} ${OFILES} ${LIBS}

all : ${EXTRA} ${NAME}
	@${ECHO} all done

extra : ${EXTRA}
	@${ECHO} done

analyse_sort.o : ${SRC}/analyse_sort.c ${SRC}/analyse_sort.h\
 ${SRC}/config.h ${SRC}/defs.h ${SRC}/enc_nos.h ${SRC}/encodings.h\
 ${SRC}/errors.h ${SRC}/lex.h ${SRC}/namedecs.h ${SRC}/streams.h\
 ${SRC}/syntax.h ${SRC}/util.h ${SRC}/ossg.h ${SRC}/includes.h\
 ${SRC}/units.h
	${MAIN_CC} ${SRC}/analyse_sort.c

consfile.o : ${SRC}/consfile.c ${SRC}/config.h ${SRC}/consfile.h\
 ${SRC}/defs.h ${SRC}/syntax.h ${SRC}/ossg.h ${SRC}/errors.h\
 ${SRC}/includes.h ${SRC}/namedecs.h ${SRC}/util.h ${SRC}/units.h\
 ${SRC}/streams.h
	${MAIN_CC} ${SRC}/consfile.c

decodings.o : ${SRC}/decodings.c ${SRC}/config.h ${SRC}/decodings.h\
 ${SRC}/enc_nos.h ${SRC}/errors.h ${SRC}/readstreams.h ${SRC}/ossg.h\
 ${SRC}/streams.h
	${MAIN_CC} ${SRC}/decodings.c

errors.o : ${SRC}/errors.c ${SRC}/config.h ${SRC}/defs.h ${SRC}/errors.h\
 ${SRC}/streams.h ${SRC}/util.h ${SRC}/ossg.h ${SRC}/includes.h\
 ${SRC}/namedecs.h ${SRC}/units.h
	${MAIN_CC} ${SRC}/errors.c

find_id.o : ${SRC}/find_id.c ${SRC}/config.h ${SRC}/defs.h\
 ${SRC}/find_id.h ${SRC}/syntax.h ${SRC}/util.h ${SRC}/ossg.h\
 ${SRC}/errors.h ${SRC}/includes.h ${SRC}/namedecs.h ${SRC}/units.h\
 ${SRC}/streams.h
	${MAIN_CC} ${SRC}/find_id.c

fnsfile.o : ${SRC}/fnsfile.c ${SRC}/analyse_sort.h ${SRC}/config.h\
 ${SRC}/consfile.h ${SRC}/defs.h ${SRC}/enc_nos.h ${SRC}/encodings.h\
 ${SRC}/lex.h ${SRC}/syntax.h ${SRC}/ossg.h ${SRC}/errors.h\
 ${SRC}/includes.h ${SRC}/namedecs.h ${SRC}/util.h ${SRC}/units.h\
 ${SRC}/streams.h
	${MAIN_CC} ${SRC}/fnsfile.c

includes.o : ${SRC}/includes.c ${SRC}/config.h ${SRC}/errors.h\
 ${SRC}/includes.h ${SRC}/util.h ${SRC}/ossg.h
	${MAIN_CC} ${SRC}/includes.c

lex.o : ${SRC}/lex.c ${SRC}/config.h ${SRC}/consfile.h ${SRC}/defs.h\
 ${SRC}/includes.h ${SRC}/reserved.h ${SRC}/syntax.h ${SRC}/util.h\
 ${SRC}/ossg.h ${SRC}/errors.h ${SRC}/namedecs.h ${SRC}/units.h\
 ${SRC}/streams.h
	${MAIN_CC} ${SRC}/lex.c

main.o : ${SRC}/main.c ${SRC}/config.h ${SRC}/includes.h ${SRC}/lex.h\
 ${SRC}/namedecs.h ${SRC}/release.h ${SRC}/syntax.h ${SRC}/units.h\
 ${SRC}/util.h ${SRC}/ossg.h ${SRC}/defs.h ${SRC}/errors.h\
 ${SRC}/streams.h
	${MAIN_CC} ${SRC}/main.c

readstreams.o : ${SRC}/readstreams.c ${SRC}/config.h ${SRC}/decodings.h\
 ${SRC}/defs.h ${SRC}/enc_nos.h ${SRC}/errors.h ${SRC}/readstreams.h\
 ${SRC}/util.h ${SRC}/ossg.h ${SRC}/includes.h ${SRC}/namedecs.h\
 ${SRC}/units.h ${SRC}/streams.h
	${MAIN_CC} ${SRC}/readstreams.c

standardsh.o : ${SRC}/standardsh.c ${SRC}/config.h ${SRC}/defs.h\
 ${SRC}/enc_nos.h ${SRC}/encodings.h ${SRC}/errors.h ${SRC}/standardsh.h\
 ${SRC}/streams.h ${SRC}/units.h ${SRC}/util.h ${SRC}/ossg.h\
 ${SRC}/includes.h ${SRC}/namedecs.h
	${MAIN_CC} ${SRC}/standardsh.c

streams.o : ${SRC}/streams.c ${SRC}/config.h ${SRC}/defs.h\
 ${SRC}/enc_nos.h ${SRC}/errors.h ${SRC}/streams.h ${SRC}/util.h\
 ${SRC}/ossg.h ${SRC}/includes.h ${SRC}/namedecs.h ${SRC}/units.h
	${MAIN_CC} ${SRC}/streams.c

syntax.o : ${SRC}/syntax.c ${SRC}/analyse_sort.h ${SRC}/config.h\
 ${SRC}/consfile.h ${SRC}/defs.h ${SRC}/enc_nos.h ${SRC}/encodings.h\
 ${SRC}/find_id.h ${SRC}/lex.h ${SRC}/readstreams.h ${SRC}/standardsh.h\
 ${SRC}/syntax.h ${SRC}/units.h ${SRC}/util.h ${SRC}/ossg.h\
 ${SRC}/errors.h ${SRC}/includes.h ${SRC}/namedecs.h ${SRC}/streams.h
	${MAIN_CC} ${SRC}/syntax.c

units.o : ${SRC}/units.c ${SRC}/config.h ${SRC}/defs.h ${SRC}/enc_nos.h\
 ${SRC}/encodings.h ${SRC}/errors.h ${SRC}/includes.h ${SRC}/readstreams.h\
 ${SRC}/streams.h ${SRC}/syntax.h ${SRC}/units.h ${SRC}/util.h\
 ${SRC}/ossg.h ${SRC}/namedecs.h
	${MAIN_CC} ${SRC}/units.c

util.o : ${SRC}/util.c ${SRC}/config.h ${SRC}/errors.h ${SRC}/util.h\
 ${SRC}/ossg.h
	${MAIN_CC} ${SRC}/util.c

clean : ${EXTRA_CLEAN}
	${REMOVE} ${OFILES}
	${REMOVE} core

clobber : clean ${EXTRA_CLOBBER}
	${REMOVE} ${NAME}

MAKE_TDF=make_tdf
SID=sid
SIDOPTS=-l ossg-c -s no-lines
SORT=sort

SID_OUT=${SRC}/syntax.c ${SRC}/syntax.h

GEN_FILES=${SRC}/consfile.c ${SRC}/consfile.h ${SRC}/decodings.c\
 ${SRC}/decodings.h ${SRC}/encodings.h ${SRC}/enc_nos.h ${SRC}/fnsfile.c

auto : ${SID_OUT} ${GEN_FILES}

${SRC}/syntax.c : ${SRC}/syntax.sid ${SRC}/syntax.act
	@${REMOVE} ${SID_OUT}
	${SID} ${SIDOPTS} ${SRC}/syntax.sid ${SRC}/syntax.act ${SID_OUT}

${SRC}/consfile.c : ${SRC2}/consfile.c ${SPEC}
	@${REMOVE} ${SRC}/consfile.c
	${MAKE_TDF} ${SPEC} ${SRC2}/consfile.c | ${SORT} > ${SRC}/consfile.c

${SRC}/consfile.h : ${SRC2}/consfile.h ${SPEC}
	@${REMOVE} ${SRC}/consfile.h
	${MAKE_TDF} ${SPEC} ${SRC2}/consfile.h ${SRC}/consfile.h

${SRC}/decodings.c : ${SRC2}/decodings.c ${SPEC}
	@${REMOVE} ${SRC}/decodings.c
	${MAKE_TDF} ${SPEC} ${SRC2}/decodings.c ${SRC}/decodings.c

${SRC}/decodings.h : ${SRC2}/decodings.h ${SPEC}
	@${REMOVE} ${SRC}/decodings.h
	${MAKE_TDF} ${SPEC} ${SRC2}/decodings.h ${SRC}/decodings.h

${SRC}/encodings.h : ${SRC2}/encodings.h ${SPEC}
	@${REMOVE} ${SRC}/encodings.h
	${MAKE_TDF} ${SPEC} ${SRC2}/encodings.h ${SRC}/encodings.h

${SRC}/enc_nos.h : ${SRC2}/enc_nos.h ${SPEC}
	@${REMOVE} ${SRC}/enc_nos.h
	${MAKE_TDF} ${SPEC} ${SRC2}/enc_nos.h ${SRC}/enc_nos.h

${SRC}/fnsfile.c : ${SRC2}/fnsfile.c ${SPEC}
	@${REMOVE} ${SRC}/fnsfile.c
	${MAKE_TDF} ${SPEC} ${SRC2}/fnsfile.c ${SRC}/fnsfile.c

auto_clobber :
	${REMOVE} ${SID_OUT}
	${REMOVE} ${GEN_FILES}
