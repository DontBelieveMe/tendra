# Automatically generated by make_mf version 1.1

# Standard directories and files
BASE=/u/g/release/Source
UTIL=${BASE}/src/utilities
SRC=${UTIL}/calculus
SRC2=${SRC}/obj_c
SRC2A=${SRC}/obj_tok
SRCX=${UTIL}/shared

# Standard variables

CC=tcc
TCCOPTS=-Yansi -Xs
CCOPTS=${TCCOPTS} -I${SRC} -I${SRC2} -I${SRCX}
MAIN_CC=${CC} ${CCOPTS} -c
LINK_CC=${CC} ${TCCOPTS}
LIBS=

REMOVE=rm -f
MOVE=mv
COPY=cp
ECHO=echo
SHELL=/bin/sh

# Dependencies and construction rules

NAME=calculus
EXTRA=auto
EXTRA_CLEAN=
EXTRA_CLOBBER=

OFILES=calculus.o check.o code.o common.o disk.o error.o lex.o main.o\
 output.o pretty.o print.o read.o syntax.o template.o token.o write.o\
 xalloc.o

${NAME} : ${OFILES}
	${LINK_CC} -o ${NAME} ${OFILES} ${LIBS}

all : ${EXTRA} ${NAME}
	@${ECHO} all done

extra : ${EXTRA}
	@${ECHO} done

calculus.o : ${SRC2}/calculus.c ${SRC2}/assert_def.h ${SRC2}/calculus.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/extra.h ${SRCX}/xalloc.h\
 ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC2}/calculus.c

check.o : ${SRC}/check.c ${SRC2}/calculus.h ${SRC}/check.h\
 ${SRC}/common.h ${SRCX}/config.h ${SRCX}/error.h ${SRC}/output.h\
 ${SRC2}/type_ops.h ${SRCX}/xalloc.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/check.c

code.o : ${SRC}/code.c ${SRC2}/calculus.h ${SRC}/code.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/lex.h ${SRC}/output.h\
 ${SRC}/suffix.h ${SRC2}/type_ops.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/code.c

common.o : ${SRC}/common.c ${SRC2}/calculus.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC2}/type_ops.h ${SRCX}/xalloc.h\
 ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/common.c

disk.o : ${SRC}/disk.c ${SRC2}/calculus.h ${SRC}/code.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRC}/disk.h ${SRC}/output.h ${SRC}/suffix.h\
 ${SRC2}/type_ops.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/disk.c

error.o : ${SRCX}/error.c ${SRCX}/config.h ${SRCX}/error.h\
 ${SRCX}/release.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRCX}/error.c

lex.o : ${SRC}/lex.c ${SRC2}/calculus.h ${SRCX}/config.h ${SRCX}/error.h\
 ${SRC}/keyword.h ${SRC}/lex.h ${SRC}/lexer.h ${SRC}/syntax.h\
 ${SRCX}/xalloc.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/lex.c

main.o : ${SRC}/main.c ${SRC2}/calculus.h ${SRC}/check.h ${SRC}/code.h\
 ${SRC}/common.h ${SRCX}/config.h ${SRC}/disk.h ${SRCX}/error.h\
 ${SRC}/lex.h ${SRC}/output.h ${SRC}/pretty.h ${SRC}/print.h ${SRC}/read.h\
 ${SRC}/template.h ${SRC}/token.h ${SRC}/write.h ${SRCX}/xalloc.h\
 ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/main.c

output.o : ${SRC}/output.c ${SRC2}/calculus.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/lex.h ${SRC}/output.h\
 ${SRC}/suffix.h ${SRC2}/type_ops.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/output.c

pretty.o : ${SRC}/pretty.c ${SRC2}/calculus.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/pretty.h ${SRC}/print_def.h\
 ${SRCX}/ossg.h ${SRCX}/ossg_api.h ${SRC2}/cmd_ops.h ${SRC2}/type_ops.h
	${MAIN_CC} ${SRC}/pretty.c

print.o : ${SRC}/print.c ${SRC2}/calculus.h ${SRC}/code.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRC}/output.h ${SRC}/print.h ${SRC}/suffix.h\
 ${SRC2}/type_ops.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/print.c

read.o : ${SRC}/read.c ${SRC2}/calculus.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/output.h ${SRC}/read.h\
 ${SRC}/read_def.h ${SRCX}/xalloc.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h\
 ${SRC}/disk.h ${SRC2}/type_ops.h
	${MAIN_CC} ${SRC}/read.c

syntax.o : ${SRC}/syntax.c ${SRC2}/calculus.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/extra.h ${SRC}/lex.h\
 ${SRC}/syntax.h ${SRC2}/type_ops.h ${SRCX}/xalloc.h ${SRCX}/ossg.h\
 ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/syntax.c

template.o : ${SRC}/template.c ${SRC2}/calculus.h ${SRC2}/cmd_ops.h\
 ${SRC}/common.h ${SRCX}/config.h ${SRCX}/error.h ${SRC}/output.h\
 ${SRC}/template.h ${SRCX}/xalloc.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/template.c

token.o : ${SRC}/token.c ${SRC2}/calculus.h ${SRC}/code.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/lex.h ${SRC}/output.h\
 ${SRC}/suffix.h ${SRC}/token.h ${SRC2}/type_ops.h ${SRCX}/ossg.h\
 ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRC}/token.c

write.o : ${SRC}/write.c ${SRC2}/calculus.h ${SRC}/common.h\
 ${SRCX}/config.h ${SRCX}/error.h ${SRC}/read.h ${SRC}/write.h\
 ${SRC}/write_def.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h ${SRC}/disk.h\
 ${SRC2}/type_ops.h
	${MAIN_CC} ${SRC}/write.c

xalloc.o : ${SRCX}/xalloc.c ${SRCX}/config.h ${SRCX}/error.h\
 ${SRCX}/xalloc.h ${SRCX}/ossg.h ${SRCX}/ossg_api.h
	${MAIN_CC} ${SRCX}/xalloc.c

clean : ${EXTRA_CLEAN}
	${REMOVE} ${OFILES}
	${REMOVE} core

clobber : clean ${EXTRA_CLOBBER}
	${REMOVE} ${NAME}

CALCULUS=calculus
LEXI=lexi
SID=sid
SIDOPTS=-l ossg-c -s no-lines

SID_OUT=${SRC}/syntax.c ${SRC}/syntax.h
C_OUT=${SRC2}/calculus.h ${SRC2}/type_ops.h
TOK_OUT=${SRC2A}/calculus.h ${SRC2A}/type_ops.h
DISK_OUT=${SRC}/read_def.h ${SRC}/write_def.h ${SRC}/print_def.h
LEXI_OUT=${SRC}/lexer.h ${SRC}/keyword.h

auto : ${SID_OUT} ${C_OUT} ${TOK_OUT} ${DISK_OUT} ${LEXI_OUT}

${SRC}/syntax.c : ${SRC}/syntax.sid ${SRC}/syntax.act
	@${REMOVE} ${SID_OUT}
	${SID} ${SIDOPTS} ${SRC}/syntax.sid ${SRC}/syntax.act ${SID_OUT}

${SRC2}/calculus.h : ${SRC}/calculus.alg
	@${REMOVE} ${SRC2}/*.h
	${CALCULUS} -a -x ${SRC}/calculus.alg ${SRC2}

${SRC2A}/calculus.h : ${SRC}/calculus.alg
	@${REMOVE} ${SRC2A}/*.h
	${CALCULUS} -a -x -t ${SRC}/calculus.alg ${SRC2A}

${SRC}/read_def.h : ${SRC}/calculus.alg ${SRC}/disk.alg
	@${REMOVE} ${SRC}/read_def.h ${SRC}/write_def.h
	${CALCULUS} -a -x -d ${SRC}/calculus.alg ${SRC}/disk.alg ${SRC}

${SRC}/print_def.h : ${SRC}/calculus.alg
	@${REMOVE} ${SRC}/print_def.h
	${CALCULUS} -a -x -p ${SRC}/calculus.alg ${SRC}

${SRC}/lexer.h : ${SRC}/lexer.lxi
	@${REMOVE} ${SRC}/lexer.h
	${LEXI} ${SRC}/lexer.lxi ${SRC}/lexer.h

${SRC}/keyword.h : ${SRC}/lexer.lxi
	@${REMOVE} ${SRC}/keyword.h
	${LEXI} -k ${SRC}/lexer.lxi ${SRC}/keyword.h

auto_clobber :
	${REMOVE} ${SID_OUT}
	${REMOVE} ${SRC2}/*.h
	${REMOVE} ${SRC2A}/*.h
	${REMOVE} ${DISK_OUT}
	${REMOVE} ${LEXI_OUT}
