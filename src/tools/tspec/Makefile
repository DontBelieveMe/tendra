# Automatically generated by make_mf version 1.1

# Standard directories and files
BASE=/u/g/release/Source
DEST=${BASE}/lib
INCL_DIR=${DEST}/include
SRC_DIR=${DEST}/building
SRC=${BASE}/src/tools/tspec
API_DIR=${BASE}/src/lib/apis

# Standard variables

CC=tcc
TCCOPTS=-Yposix1 -Xs
CCOPTS=${TCCOPTS} -I${SRC} -DINPUT_DIR=\"${API_DIR}\"\
 -DINCLUDE_DIR=\"${INCL_DIR}\" -DSRC_DIR=\"${SRC_DIR}\"
MAIN_CC=${CC} ${CCOPTS} -c
LINK_CC=${CC} ${TCCOPTS}
LIBS=

REMOVE=rm -f
MOVE=mv
COPY=cp
ECHO=echo
SHELL=/bin/sh

# Dependencies and construction rules

NAME=tspec1
EXTRA=auto
EXTRA_CLEAN=
EXTRA_CLOBBER=

OFILES=hash.o index.o lex.o main.o makefile.o name.o object.o print.o\
 syntax.o type.o utility.o variable.o

${NAME} : ${OFILES}
	${LINK_CC} -o ${NAME} ${OFILES} ${LIBS}

all : ${EXTRA} ${NAME}
	@${ECHO} all done

extra : ${EXTRA}
	@${ECHO} done

hash.o : ${SRC}/hash.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/object.h\
 ${SRC}/type.h ${SRC}/utility.h ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/hash.c

index.o : ${SRC}/index.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/name.h\
 ${SRC}/object.h ${SRC}/print.h ${SRC}/type.h ${SRC}/utility.h\
 ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/index.c

lex.o : ${SRC}/lex.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/keyword.h\
 ${SRC}/lex.h ${SRC}/lexer.h ${SRC}/name.h ${SRC}/object.h ${SRC}/syntax.h\
 ${SRC}/type.h ${SRC}/utility.h ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/lex.c

main.o : ${SRC}/main.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/index.h\
 ${SRC}/lex.h ${SRC}/makefile.h ${SRC}/name.h ${SRC}/object.h\
 ${SRC}/print.h ${SRC}/release.h ${SRC}/syntax.h ${SRC}/type.h\
 ${SRC}/utility.h ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/main.c

makefile.o : ${SRC}/makefile.c ${SRC}/config.h ${SRC}/hash.h\
 ${SRC}/name.h ${SRC}/object.h ${SRC}/type.h ${SRC}/utility.h\
 ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/makefile.c

name.o : ${SRC}/name.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/name.h\
 ${SRC}/object.h ${SRC}/type.h ${SRC}/utility.h ${SRC}/variable.h\
 ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/name.c

object.o : ${SRC}/object.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/name.h\
 ${SRC}/object.h ${SRC}/type.h ${SRC}/utility.h ${SRC}/variable.h\
 ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/object.c

print.o : ${SRC}/print.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/name.h\
 ${SRC}/object.h ${SRC}/print.h ${SRC}/type.h ${SRC}/utility.h\
 ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/print.c

syntax.o : ${SRC}/syntax.c ${SRC}/config.h ${SRC}/hash.h ${SRC}/lex.h\
 ${SRC}/name.h ${SRC}/object.h ${SRC}/syntax.h ${SRC}/type.h\
 ${SRC}/utility.h ${SRC}/variable.h ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/syntax.c

type.o : ${SRC}/type.c ${SRC}/builtin.h ${SRC}/config.h ${SRC}/hash.h\
 ${SRC}/object.h ${SRC}/type.h ${SRC}/utility.h ${SRC}/ossg.h
	${MAIN_CC} ${SRC}/type.c

utility.o : ${SRC}/utility.c ${SRC}/config.h ${SRC}/name.h\
 ${SRC}/utility.h ${SRC}/ossg.h
	${MAIN_CC} ${SRC}/utility.c

variable.o : ${SRC}/variable.c ${SRC}/config.h ${SRC}/hash.h\
 ${SRC}/name.h ${SRC}/object.h ${SRC}/type.h ${SRC}/utility.h\
 ${SRC}/ossg.h ${SRC}/builtin.h
	${MAIN_CC} ${SRC}/variable.c

clean : ${EXTRA_CLEAN}
	${REMOVE} ${OFILES}
	${REMOVE} core

clobber : clean ${EXTRA_CLOBBER}
	${REMOVE} ${NAME}

LEXI=lexi
SID=sid
SIDOPTS=-l ossg-c -s no-lines

SID_OUT=${SRC}/syntax.c ${SRC}/syntax.h
LEXI_OUT=${SRC}/lexer.h ${SRC}/keyword.h

auto : ${SID_OUT} ${LEXI_OUT}

${SRC}/syntax.c : ${SRC}/syntax.sid ${SRC}/syntax.act
	@${REMOVE} ${SID_OUT}
	${SID} ${SIDOPTS} ${SRC}/syntax.sid ${SRC}/syntax.act ${SID_OUT}

${SRC}/lexer.h : ${SRC}/lexer.lxi
	@${REMOVE} ${SRC}/lexer.h
	${LEXI} ${SRC}/lexer.lxi ${SRC}/lexer.h

${SRC}/keyword.h : ${SRC}/lexer.lxi
	@${REMOVE} ${SRC}/keyword.h
	${LEXI} -k ${SRC}/lexer.lxi ${SRC}/keyword.h

auto_clobber :
	${REMOVE} ${SID_OUT} ${LEXI_OUT}
