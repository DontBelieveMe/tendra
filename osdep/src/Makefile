# $Id$

.include "Makefile.inc"


.include <tendra.base.mk>
.include <tendra.functions.mk>
.include <tendra.compiler.mk>
.include <tendra.situ.mk>


TPLSRCS+=	INT64b.tpl
TPLSRCS+=	abstract.tpl

TPLOPTS=	-I${.CURDIR}

.include <tendra.tpl.mk>


# TODO: i'm adding c.tl because of use of undefined token, ~comp_off
# but I don't think it belongs here. (INT64a.c uses it)
${OBJ_SDIR}/INT64.o: INT64a.c ${CAPSULES}
	${TCC_IN_SITU} ${TCCOPTS} -c -o ${.TARGET} \
		-J${OBJ_SDIR} -jtarget_tok \
		-J${OBJ_SDIR} -jc \
		-M -WP,-I. ${.ALLSRC}

# TODO: i'm adding c.tl because of use of undefined token, ~char
# but I don't think it belongs here.
${OBJ_SDIR}/version.o: version.c
	${TCC_IN_SITU} ${TCCOPTS} -c -o ${.TARGET} \
		-J${OBJ_SDIR} -jc \
		version.c


OBJS+=	${OBJ_SDIR}/INT64.o
OBJS+=	${OBJ_SDIR}/version.o


LIB=		tsl
EXEC_LIB=	${PREFIX_SYS}

.include <tendra.lib.mk>



clean::
	${REMOVE} ${OBJS}

